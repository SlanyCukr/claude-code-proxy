# Claude Code Proxy Configuration
# Copy to config.toml and set your z.ai API key

[proxy]
port = 8080
debug = true

[anthropic]
base_url = "https://api.anthropic.com"

[zai]
base_url = "https://api.z.ai/api/anthropic"
api_key = ""  # Required - get from z.ai dashboard

[routing]
# Patterns in system prompts that identify subagent requests (routed to z.ai)
subagent_markers = [
    # New zai-speckit-plugin agent patterns
    "# Your Operating Instructions",
    "These instructions define how you work.",
    # Built-in Claude Code agents (Explore, Plan, etc.)
    "You are a Claude agent, built on Anthropic's Claude Agent SDK.",
]
# Markers that force Anthropic routing (exclusions from z.ai)
anthropic_markers = [
    # Built-in Plan/Design agent - keep visible in main session
    "You are a software architect and planning specialist for Claude Code.",
]

[limits]
max_body_size = 52428800  # 50MB
timeout = 300.0           # 5 minutes
max_connections = 100
max_keepalive = 20
